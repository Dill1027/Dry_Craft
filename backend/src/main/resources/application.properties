spring.application.name=backend
spring.data.mongodb.uri=mongodb+srv://prabhathdilshan2001:1234@as.gp7z1.mongodb.net/drycraft
spring.data.mongodb.database=drycraft
spring.data.mongodb.auto-index-creation=true
server.port=8081
server.address=0.0.0.0
server.error.include-message=always
server.error.include-binding-errors=always

# File upload settings
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB
upload.directory=uploads/products
spring.mvc.servlet.load-on-startup=1

# Increase timeouts and file size limits
server.tomcat.max-swallow-size=100MB
server.tomcat.connection-timeout=120000
spring.mvc.async.request-timeout=120000

# Enable chunked transfer encoding
server.tomcat.max-http-form-post-size=100MB
server.tomcat.max-http-put-size=100MB

# Video upload settings
video.max.duration.seconds=30
video.allowed.types=video/mp4,video/quicktime

# GridFS settings
spring.data.mongodb.gridfs.bucket=media
spring.data.mongodb.gridfs.chunk-size=256KB

# Media settings
media.allowed-types=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/quicktime
media.cache-control=public, max-age=31536000
media.buffer-size=16384

# Logging
logging.level.org.springframework.data.mongodb.core=DEBUG
logging.level.com.example.backend=DEBUG

# Security settings
# spring.security.user.name=user
# spring.security.user.password=password

# CORS settings
spring.web.cors.allowed-origins=http://localhost:3000,http://localhost:3001
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,HEAD
spring.web.cors.allowed-headers=*
spring.web.cors.exposed-headers=Content-Range,Accept-Ranges,Content-Disposition,Content-Length
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# Resource handling configuration
# For uploaded files and static images
spring.mvc.static-path-pattern=/api/uploads/**,/images/**
spring.web.resources.static-locations=file:${upload.directory}/,classpath:/static/images/

# Cache settings for static resources
spring.web.resources.cache.cachecontrol.max-age=365d
spring.web.resources.cache.cachecontrol.must-revalidate=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**